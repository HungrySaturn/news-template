{{ define "main" }}

{{ $authorName := .Params.author }}
{{ $icon := "" }}
{{ range (where (site.Pages) "Section" "authors") }}
    {{ if eq .Params.name $authorName }}
        {{ $icon = .Params.icon }}
    {{ end }}
{{ end }}

<article class="post">
    <h1 class="post-title">{{ .Title }}</h1>
    <p class="post-date">{{ .Date.Format "02.01.2006" }}</p>
    <a href="{{ (printf "/authors/%s" (.Params.author | urlize)) }}" class="post-author">
        {{ if $icon }}
            <img src="{{ $icon }}" alt="Author Icon" class="author-icon">
        {{ end }}
        {{ .Params.author }}
    </a>
    
    {{ if .Params.image }}
    <div class="post-image">
        <img src="{{ .Params.image }}" alt="{{ .Params.alt }}">
        <p class="image-alt">{{ .Params.alt}}</p>
    </div>
    {{ end }}

    <p class="post-description">{{ .Params.description }}</p>

    <div class="post-content">
        {{ .Content }}
    </div>
</article>

{{ end }}